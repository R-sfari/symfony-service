{% extends 'layout/base.html.twig' %}

{% block title_page %}
  {{ 'user.show.change_password'|trans }}
{% endblock %}
{% block stylesheets %}
  {{ parent() }}
  <!-- additional styles for plugins -->
  <!-- dropify -->
  <link rel="stylesheet" href="{{ asset('assets/skins/dropify/css/dropify.css')}}">
{% endblock %}

{% block body %}
{{ form_start(form, { 'action': path('fos_user_change_password'), 'attr': { 'class': 'fos_user_change_password' } }) }}
  <div class="uk-grid" data-uk-grid-margin>
    <div class="uk-width-large-7-10">
      <div class="md-card">
        <div class="user_heading">
          <div class="user_heading_avatar fileinput fileinput-new" data-provides="fileinput">
            <div class="fileinput-new thumbnail">
              {# if user.imageName %}
                <img src="{ vich_uploader_asset(user, 'imageFile') }}" alt="{ user.imageName }}"/>
              { else %}

              { endif #}
              <img src="{{ asset('user@2x.png') }}" alt="{{ app.user.username }}"/>
            </div>
            <div class="user_avatar_controls">
              <a href="#" class="btn-file fileinput-exists" data-dismiss="fileinput">
                <i class="material-icons">&#xE5CD;</i>
              </a>
            </div>
          </div>
          <div class="user_heading_content">
            <h2 class="heading_b uk-margin-bottom">
              <span class="uk-text-truncate">{{ app.user.username }}</span>
              <span class="sub-heading">{# user.firstName }} { user.lastName #}</span>
            </h2>
          </div>
          <div class="md-fab-wrapper">
            <a class="md-fab md-fab-small md-fab-accent" href="{{ path('fos_user_profile_show') }}">
              <i class="material-icons">&#xE88A;</i>
            </a>
          </div>
        </div>
        <div class="user_content">
          <h3 class="full_width_in_card heading_c">{{ 'user.show.change_password'|trans }}</h3>

          <div class="uk-form-row">
            <div class="uk-form-row uk-input-group">
              <span class="uk-input-group-addon">
                <i class="md-list-addon-icon material-icons">&#xE899;</i>
              </span>
              <label class="uk-form-label">{{ form_label(form.current_password) }}</label>
              {{ form_widget(form.current_password)}}
              <div class="parsley-errors-list filled uk-text-danger">
                {{ form_errors(form.current_password) }}
              </div>
            </div>
            {% for passwordField in form.plainPassword %}
              <div class="uk-form-row uk-input-group">
                <span class="uk-input-group-addon">
                  <i class="md-list-addon-icon material-icons">&#xE899;</i>
                </span>
                <label class="uk-form-label">{{ form_label(passwordField) }}</label>
                {{ form_widget(passwordField)}}
                <div class="parsley-errors-list filled uk-text-danger">
                  {{ form_errors(passwordField) }}
                </div>
              </div>
            {% endfor %}
          </div>

        </div>
      </div>
    </div>
    <div class="uk-width-xLarge-2-10 uk-width-large-3-10">
      <div class="md-card">
        <div class="md-card-content">
          <ul class="md-list md-list-addon">
            <li>
              <div class="md-list-addon-element">
                <i class="md-list-addon-icon material-icons">&#xE8DF;</i>
              </div>
              <div class="md-list-content">
                <span class="md-list-heading">
                  {% if app.user.lastLogin %}{{ app.user.lastLogin|date('d M Y') }}{% endif %}
                </span>
                <span class="uk-text-small uk-text-muted">{{ 'author.created'|trans }}</span>
              </div>
            </li>
            <li>
              <div class="md-list-addon-element">
                <i class="md-list-addon-icon material-icons">&#xE8B5;</i>
              </div>
              <div class="md-list-content">
                <span class="md-list-heading">
                  {% if app.user.lastLogin %}{{ app.user.lastLogin|date('d M Y') }}{% endif %}
                </span>
                <span class="uk-text-small uk-text-muted">{{ 'author.updated'|trans }}</span>
              </div>
            </li>

          </ul>
        </div>
      </div>
    </div>
  </div>
  {{ form_widget(form) }}
  <div class="md-fab-wrapper">
    <button type="submit" class="md-fab md-fab-accent md-fab-wave waves-effect waves-button">
      <i class="material-icons">&#xE161;</i>
    </button>
  </div>
  {{ form_end(form) }}
{% endblock %}
